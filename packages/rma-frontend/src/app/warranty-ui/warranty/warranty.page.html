<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="navigateBack()">
        <ion-icon slot="icon-only" name="arrow-back"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>Warranty</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="page-background">
  <ion-grid class="ion-no-padding">
    <ion-row class="ion-no-padding">
      <ion-col class="ion-no-padding">
        <ion-card>
          <ion-card-header>
            <ion-card-title>
              <ion-text color="tertiary">
                {{ snakeToTitleCase(model) }}
              </ion-text>
            </ion-card-title>
          </ion-card-header>
          <div class="loading-shade" *ngIf="dataSource.loading$ | async">
            <mat-progress-bar
              *ngIf="dataSource.loading$ | async"
              mode="indeterminate"
            ></mat-progress-bar>
          </div>
          <div class="card-container">
            <div class="search-models">
              <mat-form-field class="full-width">
                <input
                  matInput
                  placeholder="Search"
                  [(ngModel)]="search"
                  (keyup.enter)="setFilter()"
                />
                <button mat-button matSuffix (click)="setFilter()">
                  <mat-icon>search</mat-icon>
                </button>
              </mat-form-field>
            </div>
            <ion-card-content class="table-container">
              <table
                mat-table
                class="full-width-table"
                [dataSource]="dataSource"
                matSort
                aria-label="Elements"
                style="width: 100%;"
              >
                <!-- serial_no Column -->
                <ng-container matColumnDef="serial_no">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    mat-sort-header
                    (click)="setFilter()"
                  >
                    serial_no
                  </th>
                  <td mat-cell *matCellDef="let row">
                    <a [routerLink]="['/' + model, row.uuid]"
                      >{{row.serial_no}}</a
                    >
                  </td>
                </ng-container>

                <ng-container matColumnDef="item_code">
                  <th
                    mat-header-cell
                    *matHeaderCellDef
                    mat-sort-header
                    (click)="setFilter()"
                  >
                    item_code
                  </th>
                  <td mat-cell *matCellDef="let row">
                    <a [routerLink]="['/' + model, row.uuid]"
                      >{{row.item_code}}</a
                    >
                  </td>
                </ng-container>

                <!-- UUID Column -->
                <ng-container matColumnDef="uuid">
                  <th mat-header-cell *matHeaderCellDef>UUID</th>
                  <td mat-cell *matCellDef="let row">{{row.uuid}}</td>
                </ng-container>

                <tr
                  mat-header-row
                  *matHeaderRowDef="displayedColumns; sticky: true"
                ></tr>
                <tr
                  mat-row
                  *matRowDef="let row; columns: displayedColumns;"
                ></tr>
              </table>
            </ion-card-content>
            <mat-card-actions>
              <mat-paginator
                #paginator
                class="mat-paginator-sticky"
                (page)="getUpdate($event)"
                [pageIndex]="paginator.pageIndex"
                [length]="dataSource.length"
                [pageSizeOptions]="[10, 50, 100, 500]"
              >
              </mat-paginator>
            </mat-card-actions>
          </div>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
